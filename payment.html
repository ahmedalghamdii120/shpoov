<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الدفع والاشتراك - SHPOOV</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
</head>

<body>

    <!-- Header (Simplified) -->
    <header class="main-header" style="position: relative; background-color: var(--bg-dark);">
        <div class="container">
            <div class="logo">
                <h1>SHPOOV</h1>
            </div>
            <div class="nav-group">
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html">العودة للرئيسية</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Payment Section -->
    <section class="payment-section" style="padding: 50px 0; min-height: 80vh;">
        <div class="container">
            <h2 class="big-title" style="font-size: 3rem;">إتمام الاشتراك</h2>

            <div class="payment-grid"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px;">

                <!-- Registration Form -->
                <div class="registration-form" style="background: var(--bg-card); padding: 30px; border-radius: 10px;">
                    <h3 style="color: var(--white); margin-bottom: 20px;">بيانات المشترك</h3>
                    <form onsubmit="event.preventDefault(); alert('تم إرسال الطلب بنجاح! (تجريبي)');">
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">الاسم
                                الكامل</label>
                            <input type="text" required
                                style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                        </div>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">رقم
                                الجوال</label>
                            <input type="tel" id="user-phone" required maxlength="10"
                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                        </div>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">البريد
                                الإلكتروني</label>
                            <input type="email" required
                                style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                        </div>

                        <h3 style="color: var(--white); margin: 30px 0 20px;">طريقة الدفع</h3>
                        <div style="display: flex; gap: 20px; margin-bottom: 30px;">
                            <div id="btn-card" onclick="selectPayment('card')"
                                style="background: #333; padding: 10px 20px; border: 1px solid var(--primary-color); border-radius: 5px; color: white; cursor: pointer; flex: 1; text-align: center;">
                                بطاقة مدى / ائتمان</div>
                            <div id="btn-bank" onclick="selectPayment('bank')"
                                style="background: #333; padding: 10px 20px; border: 1px solid #444; border-radius: 5px; color: gray; cursor: pointer; flex: 1; text-align: center;">
                                تحويل بنكي</div>
                        </div>

                        <!-- Card Fields -->
                        <div id="card-fields"
                            style="display: block; border-top: 1px solid #444; padding-top: 20px; margin-bottom: 20px;">
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">اسم حامل
                                    البطاقة</label>
                                <input type="text" placeholder="الاسم كما في البطاقة"
                                    style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                            </div>
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">رقم
                                    البطاقة</label>
                                <input type="text" id="card-number" placeholder="0000 0000 0000 0000" maxlength="19"
                                    oninput="formatCardNumber(this)"
                                    style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                            </div>
                            <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div class="form-group">
                                    <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">تاريخ
                                        الانتهاء</label>
                                    <input type="text" id="card-expiry" placeholder="MM / YY" maxlength="5"
                                        oninput="formatExpiryDate(this)"
                                        style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: block; color: var(--text-gray); margin-bottom: 5px;">رمز
                                        التحقق (CVV)</label>
                                    <input type="text" id="card-cvv" placeholder="123" maxlength="4"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                        style="width: 100%; padding: 10px; background: #333; border: 1px solid #444; color: white; border-radius: 5px;">
                                </div>
                            </div>
                        </div>

                        <!-- Bank Info (Hidden by default) -->
                        <div id="bank-info"
                            style="display: none; border-top: 1px solid #444; padding-top: 20px; margin-bottom: 20px; color: var(--text-gray);">
                            <p>يرجى التحويل إلى الحساب التالي:</p>
                            <p style="color: white; font-weight: bold; margin-top: 10px;">بنك الراجحي</p>
                            <p>IBAN: SA00 0000 0000 0000 0000 00</p>
                            <p style="margin-top: 10px;">* يرجى إرفاق صورة الإيصال بعد التحويل.</p>
                        </div>

                        <button type="submit" class="btn-subscribe"
                            style="width: 100%; background: var(--primary-color); color: white; border: none; cursor: pointer;">إتمام
                            الدفع</button>
                    </form>
                </div>

                <!-- Order Summary -->
                <div class="order-summary"
                    style="background: #000; padding: 30px; border-radius: 10px; height: fit-content; border: 1px solid var(--primary-color);">
                    <h3 style="color: var(--white); margin-bottom: 20px;">ملخص الطلب</h3>

                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 15px; color: var(--text-gray);">
                        <span>الباقة المختارة:</span>
                        <span id="plan-name" style="color: white; font-weight: bold;">--</span>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 15px; color: var(--text-gray);">
                        <span>السعر:</span>
                        <span id="plan-price" style="color: var(--primary-color); font-weight: bold;">--</span>
                    </div>

                    <div style="border-top: 1px solid #333; margin: 20px 0;"></div>

                    <div
                        style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; color: white;">
                        <span>الإجمالي:</span>
                        <span id="total-price">--</span>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Script to Handle URL Params -->
    <script>
        // تنسيق رقم البطاقة (أرقام فقط + مسافات)
        function formatCardNumber(input) {
            let value = input.value.replace(/\D/g, ''); // حذف الأحرف
            // إضافة مسافة كل 4 أرقام
            value = value.replace(/(\d{4})/g, '$1 ').trim();
            input.value = value;
        }

        // تنسيق التاريخ (أرقام فقط + /)
        function formatExpiryDate(input) {
            let value = input.value.replace(/\D/g, ''); // حذف الأحرف
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            input.value = value;
        }

        // دالة بسيطة لقراءة الباراميترات من الرابط
        // e.g. payment.html?plan=سنوي&price=6898.85
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                plan: params.get('plan'),
                price: params.get('price')
            };
        }

        const data = getQueryParams();

        if (data.plan) {
            document.getElementById('plan-name').innerText = data.plan;
        }
        if (data.price) {
            document.getElementById('plan-price').innerText = data.price + ' ر.س';
            document.getElementById('total-price').innerText = data.price + ' ر.س';
        }

        // دالة التبديل بين طرق الدفع
        function selectPayment(method) {
            const btnCard = document.getElementById('btn-card');
            const btnBank = document.getElementById('btn-bank');
            const cardFields = document.getElementById('card-fields');
            const bankInfo = document.getElementById('bank-info');

            if (method === 'card') {
                // تفعيل زر البطاقة
                btnCard.style.borderColor = 'var(--primary-color)';
                btnCard.style.color = 'white';

                // إلغاء زر البنك
                btnBank.style.borderColor = '#444';
                btnBank.style.color = 'gray';

                // إظهار الحقول
                cardFields.style.display = 'block';
                bankInfo.style.display = 'none';
            } else {
                // تفعيل زر البنك
                btnBank.style.borderColor = 'var(--primary-color)';
                btnBank.style.color = 'white';

                // إلغاء زر البطاقة
                btnCard.style.borderColor = '#444';
                btnCard.style.color = 'gray';

                // إظهار المعلومات
                bankInfo.style.display = 'block';
                cardFields.style.display = 'none';
            }
        }
    </script>

</body>

</html>